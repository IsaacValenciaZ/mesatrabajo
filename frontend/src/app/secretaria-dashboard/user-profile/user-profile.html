<div class="profile-page-container fade-in">

  <div class="profile-card">
    <div class="profile-header-bg">
        <div class="avatar-container">
           <div class="big-avatar">{{ user.nombre?.charAt(0) }}</div>
        </div>
      </div>
      <div class="profile-body">
        <div class="header-text">
            <h2>{{ user.nombre }}</h2>
            <p class="role-badge">Perfil de Secretaria</p>
        </div>
        
        <div class="form-content">
            <div class="form-row">
                <div class="form-group">
                  <label>Nombre Completo</label>
                  <div class="input-wrapper">
                      <span class="material-symbols-outlined icon">person</span>
                      <input type="text" [(ngModel)]="user.nombre">
                  </div>
                </div>
                <div class="form-group">
                  <label>Correo Electrónico</label>
                  <div class="input-wrapper">
                      <span class="material-symbols-outlined icon">mail</span>
                      <input type="email" [(ngModel)]="user.email">
                  </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Nueva Contraseña</label>
                    <div class="input-wrapper">
                        <span class="material-symbols-outlined icon">lock</span>
                        <input type="password" [(ngModel)]="newPassword" placeholder="Opcional">
                    </div>
                </div>
                <div class="form-group">
                    <label>Confirmar</label>
                    <div class="input-wrapper">
                        <span class="material-symbols-outlined icon">lock_reset</span>
                        <input type="password" [(ngModel)]="confirmPassword" placeholder="Confirma contraseña">
                    </div>
                </div>
            </div>
            <button class="btn-update" (click)="actualizarPerfil()">
                <span class="material-symbols-outlined">save</span> Guardar Cambios
            </button>
        </div>
      </div>
  </div>

  <h3 class="section-divider">Mis Asignaciones</h3>
  
  <div class="stats-grid">
      <div class="stats-card evolution-card" style="grid-column: span 2;">
          <div class="stats-header">
              <h3>Evolución de Eficiencia</h3>
              <p>Tu desempeño resolviendo tickets</p>
          </div>
          <div class="evolution-chart-wrapper">
              <canvas id="monthlyChart"></canvas>
          </div>
      </div>
  </div>

  <h3 class="section-divider" style="margin-top: 40px;">Gestión Administrativa</h3>
  
  <div class="stats-grid">
      
      <div class="stats-card">
          <div class="stats-header">
              <h3>Tickets Creados</h3>
              <p>Solamente Mes Actual ({{ tituloMesActual }})</p>
              
          </div>
          <div class="stats-content">
              <div class="chart-wrapper" *ngIf="chartsReady">
                  <canvas id="createdTotalChart"></canvas> 
                  <div class="chart-center-text">
                      <span class="big-number" style="color: #3b82f6;">{{ creadosMesActual }}</span>
                      <span class="label">Este Mes</span>
                  </div>
              </div>
              <div *ngIf="!chartsReady" style="color: #888;">Cargando...</div>
          </div>
      </div>

      <div class="stats-card">
          <div class="stats-header">
              <h3>Ritmo de Asignaciones</h3>
              <p>Tickets asignados por personal (Anual)</p>
          </div>
          <div class="evolution-chart-wrapper" *ngIf="chartsReady">
              <canvas id="createdHistoryChart"></canvas> 
          </div>
          <div *ngIf="!chartsReady" style="text-align: center; padding: 20px; color: #888;">Cargando datos...</div>
      </div>

  </div>
</div>